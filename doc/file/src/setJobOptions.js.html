<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/setJobOptions.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="https://github.com/Madadata/hasoop" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/index.js~Hasoop.html">Hasoop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-senDeleteRequest">senDeleteRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-senPostRequest">senPostRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-senPutRequest">senPutRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sendGetRequest">sendGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setCreateJobRequestBody">setCreateJobRequestBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setUpdateJobRequestBody">setUpdateJobRequestBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setCreateLinkRequestBody">setCreateLinkRequestBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setUpdateLinkRequestBody">setUpdateLinkRequestBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-splitJobConfig">splitJobConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-splitLinkConfig">splitLinkConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-connectorType">connectorType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-genericType">genericType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-linkType">linkType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-version">version</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/setJobOptions.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Created by Chyroc on 17/1/15.
 */

// import { connectorType } from &apos;./index&apos;
import { splitLinkConfig } from &apos;./utils&apos;

function setMysqlJobConfig (linkConfig, jobConfig) {
  return {
    &apos;configs&apos;: [{
      &apos;validators&apos;: [],
      &apos;inputs&apos;: [{
        &apos;size&apos;: 50,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.schemaName&apos;,
        &apos;id&apos;: 74,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;,
        &apos;value&apos;: jobConfig.schemaName
      }, {
        &apos;size&apos;: 50,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.tableName&apos;,
        &apos;id&apos;: 75,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;,
        &apos;value&apos;: jobConfig.tableName
      }, {
        &apos;size&apos;: 2000,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.sql&apos;,
        &apos;id&apos;: 76,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.columnList&apos;,
        &apos;id&apos;: 77,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;LIST&apos;
      }, {
        &apos;size&apos;: 50,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.partitionColumn&apos;,
        &apos;id&apos;: 78,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.allowNullValueInPartitionColumn&apos;,
        &apos;id&apos;: 79,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;BOOLEAN&apos;
      }, {
        &apos;size&apos;: 50,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;fromJobConfig.boundaryQuery&apos;,
        &apos;id&apos;: 80,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }],
      &apos;name&apos;: &apos;fromJobConfig&apos;,
      &apos;id&apos;: 19,
      &apos;type&apos;: &apos;JOB&apos;
    }, {
      &apos;validators&apos;: [],
      &apos;inputs&apos;: [{
        &apos;size&apos;: 50,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;incrementalRead.checkColumn&apos;,
        &apos;id&apos;: 81,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }, {
        &apos;size&apos;: -1,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;incrementalRead.lastValue&apos;,
        &apos;id&apos;: 82,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }],
      &apos;name&apos;: &apos;incrementalRead&apos;,
      &apos;id&apos;: 20,
      &apos;type&apos;: &apos;JOB&apos;
    }],
    &apos;validators&apos;: []
  }
}

function setHdfsJobConfig (linkConfig, jobConfig) {
  return {
    &apos;configs&apos;: [{
      &apos;validators&apos;: [],
      &apos;inputs&apos;: [{
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;toJobConfig.overrideNullValue&apos;,
        &apos;id&apos;: 60,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;BOOLEAN&apos;
      }, {
        &apos;size&apos;: 255,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;toJobConfig.nullValue&apos;,
        &apos;id&apos;: 61,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;values&apos;: &apos;TEXT_FILE,SEQUENCE_FILE,PARQUET_FILE&apos;,
        &apos;name&apos;: &apos;toJobConfig.outputFormat&apos;,
        &apos;id&apos;: 62,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;ENUM&apos;,
        &apos;value&apos;: &apos;TEXT_FILE&apos; // TODO
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;values&apos;: &apos;NONE,DEFAULT,DEFLATE,GZIP,BZIP2,LZO,LZ4,SNAPPY,CUSTOM&apos;,
        &apos;name&apos;: &apos;toJobConfig.compression&apos;,
        &apos;id&apos;: 63,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;ENUM&apos;,
        &apos;value&apos;: &apos;NONE&apos; // TODO
      }, {
        &apos;size&apos;: 255,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;toJobConfig.customCompression&apos;,
        &apos;id&apos;: 64,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;
      }, {
        &apos;size&apos;: 255,
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;toJobConfig.outputDirectory&apos;,
        &apos;id&apos;: 65,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;STRING&apos;,
        &apos;value&apos;: encodeURIComponent(jobConfig.outputDirectory)
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;toJobConfig.appendMode&apos;,
        &apos;id&apos;: 66,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;BOOLEAN&apos;
      }],
      &apos;name&apos;: &apos;toJobConfig&apos;,
      &apos;id&apos;: 16,
      &apos;type&apos;: &apos;JOB&apos;
    }],
    &apos;validators&apos;: []
  }
}

function setJobConfig (jobConfig) {
  return {
    &apos;configs&apos;: [{
      &apos;validators&apos;: [],
      &apos;inputs&apos;: [{
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;throttlingConfig.numExtractors&apos;,
        &apos;id&apos;: 88,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;INTEGER&apos;
      }, {
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;throttlingConfig.numLoaders&apos;,
        &apos;id&apos;: 89,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;INTEGER&apos;
      }],
      &apos;name&apos;: &apos;throttlingConfig&apos;,
      &apos;id&apos;: 22,
      &apos;type&apos;: &apos;JOB&apos;
    }, {
      &apos;validators&apos;: [],
      &apos;inputs&apos;: [{
        &apos;editable&apos;: &apos;ANY&apos;,
        &apos;validators&apos;: [],
        &apos;name&apos;: &apos;jarConfig.extraJars&apos;,
        &apos;id&apos;: 90,
        &apos;sensitive&apos;: false,
        &apos;overrides&apos;: &apos;&apos;,
        &apos;type&apos;: &apos;LIST&apos;
      }],
      &apos;name&apos;: &apos;jarConfig&apos;,
      &apos;id&apos;: 23,
      &apos;type&apos;: &apos;JOB&apos;
    }],
    &apos;validators&apos;: []
  }
}

export function setCreateJobRequestBody (jobName, jobConfig, fromLinkInfo, toLinkInfo, jobId = -1) {
  const fromLinkConfig = splitLinkConfig(fromLinkInfo)
  const toLinkConfig = splitLinkConfig(toLinkInfo)
  return {
    &apos;jobs&apos;: [{
      &apos;id&apos;: jobId,
      &apos;name&apos;: jobName,
      &apos;creation-date&apos;: Date.now(),
      &apos;creation-user&apos;: null,
      &apos;update-user&apos;: null,
      &apos;update-date&apos;: Date.now(),
      &apos;enabled&apos;: true,
      &apos;from-link-name&apos;: fromLinkConfig.name,
      &apos;from-connector-name&apos;: fromLinkConfig.connectorName,
      &apos;to-link-name&apos;: toLinkConfig.name,
      &apos;to-connector-name&apos;: toLinkConfig.connectorName,
      &apos;to-config-values&apos;: setHdfsJobConfig(toLinkConfig, jobConfig),
      &apos;from-config-values&apos;: setMysqlJobConfig(fromLinkConfig, jobConfig),
      &apos;driver-config-values&apos;: setJobConfig(jobConfig)
    }]
  }
}
export function setUpdateJobRequestBody (jobName, jobConfig, fromLinkInfo, toLinkInfo, jobId) {
  return setCreateJobRequestBody(jobName, jobConfig, fromLinkInfo, toLinkInfo, jobId)
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
